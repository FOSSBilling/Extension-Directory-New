{% extends "base.html.twig" %}

{% block title %}
  <title>{{ extension.name }} | FOSSBilling extensions</title>
{% endblock %}

{% block content %}
  <div class="row">
    <div class="card col-md-9">
      <div class="card-header">
        <h1>{{ extension.name }}</h1>
        <p class="text-muted">{{ extension.description }}</p>
      </div>
      <div class="card-body overflow-scroll">
        {{ extension.readme|raw }}
      </div>
    </div>
    <div class="col-md-3">
      <!-- Extension info -->
      <div class="card">
        <div class="card-header">
          <h4>Extension information</h4>
        </div>
        <div class="card-body">
          <dl>
            <dt>Website</dt>
            <dd>
              <a href="{{ extension.website }}" target="_blank">
                <img src="{{ url_for('badge', { 'id': extension.id, 'type': 'website' }) }}?color=7FFFD4" alt="{{ extension.website }}">
              </a>
            </dd>

            <dt>Author</dt>
            <dd>
              <a href="{{ extension.author.url }}" target="_blank">
                <img src="{{ url_for('badge', { 'id': extension.id, 'type': 'author' }) }}?color=FFD700" alt="{{ extension.author.name }}">
              </a>
            </dd>

            <dt>License</dt>
            <dd>
              <a href="{{ extension.license.url }}" target="_blank">
                <img src="{{ url_for('badge', { 'id': extension.id, 'type': 'license' }) }}?color=blue" alt="{{ extension.license.name }}">
              </a>
            </dd>

            <dt>Source code</dt>
            <dd>
              <a href="{{ extension.repo }}" target="_blank">
                <img src="{{ url_for('badge', { 'id': extension.id, 'type': 'repo_type_2'}) }}?color=2E8B57" alt="{{ extension.repo|repoName }}">
              </a>
            </dd>

            <dt>Minimum FOSSBilling version</dt>
            <dd><img src="{{ url_for('badge', { 'id': extension.id, 'type': 'min_fossbilling_version'}) }}?color=orange" alt="{{ extension.repo|repoName }}"></dd>
          </dl> 
        </div>
      </div>
      <!-- Extension releases -->
      <div class="card mt-2">
        <div class="card-header">
          <h4>Extension releases</h4>
        </div>
        <div class="card-body">
          <ul>
            {% for release in extension.releases %}
              <li>
                <strong>Version: {{ release.tag }}</strong><br>
                Date: {{ release.date }}<br>
                Minimum FOSSBilling Version: {{ release.min_fossbilling_version }}<br>
                <a href="{{ release.download_url }}" target="_blank">Download</a><br>
                <a href="{{ release.changelog_url }}" target="_blank">Changelog</a>
              </li>
              <hr>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
